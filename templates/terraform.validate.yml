parameters:
- name: workingDirectory
  type: string
- name: variables
  type: string
  default: ''

steps:
- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-installer.TerraformInstaller@0
  displayName: Download Terraform
  
- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: Initializing
  inputs:
    command: init
    workingDirectory: ${{ parameters.workingDirectory }}
    backendType: local
  env:
    TF_CLI_ARGS: -no-color
    TF_CLI_ARGS_init: -backend=false
    TF_INPUT: false

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: 'Validating'
  inputs:
    workingDirectory: ${{ parameters.workingDirectory }}
