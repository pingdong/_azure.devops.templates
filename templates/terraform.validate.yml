parameters:
- name: workingDirectory
  type: string

steps:
- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-installer.TerraformInstaller@0
  displayName: Download Terraform

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: Initailizing Backend
  inputs:
    command: init
    commandOptions: '-backend=false -input=false'
    workingDirectory: ${{ parameters.workingDirectory }}

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: 'Validating'
  inputs:
    workingDirectory: ${{ parameters.workingDirectory }}
