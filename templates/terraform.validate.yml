parameters:
- name: workingDirectory
  type: string

steps:
- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-installer.TerraformInstaller@0
  displayName: 'Download latest'

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: 'Initailizing'
  inputs:
    command: init
    commandOptions: '-backend=false'

- base: echo ${{ parameters.workingDirectory }}

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: 'Validating'
  inputs:
    workingDirectory: ${{ parameters.workingDirectory }}

# - template: $(parameters.templateDirectory)/terraform.install.yml
#   parameters:
#     terraformVersion: $(parameters.terraformVersion)      

# - bash: |
#     $TERRAFORM_BINARY init \
#       -backend=false
#     $TERRAFORM_BINARY validate
#   displayName: Validating
#   workingDirectory: "$(parameters.workingDirectory)"
