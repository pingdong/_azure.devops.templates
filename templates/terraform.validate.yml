parameters:
- name: workingDirectory
  type: string
- name: variables
  type: string
  default: ''

steps:
- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-installer.TerraformInstaller@0
  displayName: Download Terraform

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: Initailizing Backend
  inputs:
    command: init
    commandOptions: ${{ parameters.variables }}
    workingDirectory: ${{ parameters.workingDirectory }}
  env:
    TF_CLI_ARGS: -no-color
    TF_INPUT: false
    TF_BACKEND: false

- task: charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-cli.TerraformCLI@0
  displayName: 'Validating'
  inputs:
    workingDirectory: ${{ parameters.workingDirectory }}
